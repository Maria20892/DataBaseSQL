CREATE TABLE A_Origin(
City_ID INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
City_name VARCHAR(85),
Country_name VARCHAR(56),
Continent VARCHAR(13) NOT NULL,
Climate_zone VARCHAR(20) NOT NULL
);

CREATE TABLE Scientific_classification(
ID INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
Name VARCHAR(30) NOT NULL,
Species VARCHAR(199) NOT NULL,
Genus VARCHAR(199) NOT NULL,
Family VARCHAR(199) NOT NULL,
Order_ VARCHAR(199) NOT NULL,
Class VARCHAR(199) NOT NULL
);

CREATE TABLE Zoo_location(
Cage_ID  INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
Capacity int NOT NULL,
Zone_type VARCHAR(20) NOT NULL
);

CREATE TABLE Positions(
Position_ID INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
Position_Name VARCHAR(30)
);


CREATE TABLE Employees(
ID INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
First_name VARCHAR(30) NOT NULL,
Last_name VARCHAR(40) NOT NULL,
Date_of_birth VARCHAR (10) NOT NULL,
Phone_number VARCHAR (11) UNIQUE NOT NULL,
E_mail VARCHAR(30) UNIQUE,
Gender VARCHAR(1) NOT NULL,
PESEL VARCHAR (11) UNIQUE NOT NULL,
PAddress VARCHAR(400),
Is_active INT DEFAULT 0 NOT NULL,
Manager_ID INT FOREIGN KEY REFERENCES Employees(ID),
Position_ID INT FOREIGN KEY REFERENCES Positions(Position_ID)
ON DELETE CASCADE
);

CREATE TABLE Catalog_of_ingredients(
Ingredient_ID INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
Ingredient_name VARCHAR(50) NOT NULL,
IType VARCHAR(30) NOT NULL,
UNIQUE (Ingredient_name)
);

CREATE TABLE Substitutes(
Substitute_ID INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
Ingredient1 INT NOT NULL FOREIGN KEY REFERENCES Catalog_of_ingredients(Ingredient_ID ),
Ingredient2 INT NOT NULL FOREIGN KEY REFERENCES Catalog_of_ingredients(Ingredient_ID )
);

CREATE TABLE Animals(
Animal_ID  INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
Gender VARCHAR(1) NOT NULL,
AName VARCHAR(20) ,
Birth_date VARCHAR(10) NOT NULL,
Death_date VARCHAR(10),
Registration_date VARCHAR(10) NOT NULL,
ID_SC INT REFERENCES Scientific_classification,
CityID INT REFERENCES A_Origin,
C_ID INT REFERENCES Zoo_location
ON UPDATE CASCADE,
ID_E INT REFERENCES Employees
);

CREATE TABLE Diets(
Diet_ID INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
Number_of_meals INT NOT NULL,
Dietition INT FOREIGN KEY REFERENCES Employees(ID)
);

CREATE TABLE Meals(
Meal_ID INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
Order_in_day INT NOT NULL,
D_ID INT FOREIGN KEY REFERENCES Diets(Diet_ID)
);

CREATE TABLE Planned_Ingredient(
ID INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
Amount_in_kg float NOT NULL,
M_ID INT FOREIGN KEY REFERENCES Meals(Meal_ID),
Ing_ID INT FOREIGN KEY REFERENCES Catalog_of_ingredients(Ingredient_ID)
);

CREATE TABLE Feeding_plan(
FPlan_ID INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
From_date VARCHAR(10) NOT NULL,
To_date VARCHAR(10),
D_ID INT FOREIGN KEY REFERENCES Diets(Diet_ID),
A_ID INT FOREIGN KEY REFERENCES Animals(Animal_ID)
);

CREATE TABLE Feeding_details(
Feeding_ID INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
Feeding_time varchar (5) NOT NULL,
Feeding_date VARCHAR (10) NOT NULL,
E_ID INT FOREIGN KEY REFERENCES Employees(ID),
A_ID INT FOREIGN KEY REFERENCES Animals(Animal_ID),
M_ID INT FOREIGN KEY REFERENCES Meals(Meal_ID)
);


CREATE TABLE Changed_ingredient(
ID INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
Amount_in_kg float NOT NULL,
Ing_ID INT FOREIGN KEY REFERENCES Catalog_of_ingredients(Ingredient_ID),
Feed_ID INT FOREIGN KEY REFERENCES Feeding_details(Feeding_ID)
);

